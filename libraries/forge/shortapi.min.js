var shortapi={getFov:function(){return viewer.camera.fov},getYaw:function(){return viewer.camera.yaw},getPitch:function(){return viewer.camera.pitch},getCurrentSceneUid:function(){return viewer.story.sceneUid},getProjection:function(){return viewer.view.type},getHotspots:function(){var e=this.getCurrentSceneUid();return FORGE.UID.get(e).config.hotspots},getNextSceneUid:function(){return this.getPreviousNextUid().nextSceneUid},getPreviousSceneUid:function(){return this.getPreviousNextUid().previousSceneUid},getPreviousNextUid:function(){for(var e,t,n=this.isFirstStoryScene(),i=this.isLastStoryScene(),o=this.getCurrentSceneUid(),r=viewer.story.scenes,s=r.length,a={},c=0;c<s;c++)a[c]=r[c].uid,a[c]==o&&(e=c-1,t=c+1);return n?{previousSceneUid:!1,nextSceneUid:a[t],currentSceneUid:o}:i?{previousSceneUid:a[e],nextSceneUid:!1,currentSceneUid:o}:{previousSceneUid:a[e],nextSceneUid:a[t],currentSceneUid:o}},getHotspotType:function(e){return void 0!==FORGE.UID.get(e)&&FORGE.UID.get(e).className},getHotspot3DWorld:function(e){if(this.isHotspot3D(e)){return{yaw:FORGE.UID.get(e).config.transform.position.theta,pitch:FORGE.UID.get(e).config.transform.position.phi}}return!1},getWorldToScreen:function(e){var t=0,n=0;if("object"==typeof e)void 0!==e.yaw&&(t=e.yaw),void 0!==e.pitch&&(n=e.pitch);else{if("string"!=typeof e)return console.log("need an object with yaw/pitch or a string with hotspot 3D UID");this.isHotspot3D(e)&&(t=FORGE.UID.get(e).config.transform.position.theta,n=FORGE.UID.get(e).config.transform.position.phi)}var i=FORGE.Math.sphericalToCartesian(30,t,n,FORGE.Math.DEGREES),o=new THREE.Vector3(i.x,i.y,i.z);return viewer.view.worldToScreen(o,0)},getClassName:function(e){if(void 0!==FORGE.UID.get(e))return FORGE.UID.get(e).className;console.log("not a valid uid or not supported")},getLocale:function(){return viewer.i18n.locale},getDescription:function(e){return void 0===e?FORGE.UID.get(this.getCurrentSceneUid()).description:void 0!==FORGE.UID.get(e)?FORGE.UID.get(e).description:void console.log("not an valid element uid")},getTitle:function(e){return void 0===e?FORGE.UID.get(this.getCurrentSceneUid()).name:void 0!==FORGE.UID.get(e)?FORGE.UID.get(e).name:void console.log("not an valid element uid")},getMediaType:function(){return FORGE.UID.get(this.getCurrentSceneUid()).media.type},getVolume:function(e){if("string"==typeof e){if("master"==e)return viewer.audio.volume;if("scene"==e)return this.getVideoVolume();if("playlist"==e)return viewer.playlists.playlist.volume;console.log('specified source must be:"master", "playlist" or "scene"')}else console.log('must be a string:"master", "playlist" or "scene"')},getVideoVolume:function(){if("video"==this.getMediaType())return viewer.story.scene.media.displayObject.volume;console.log("current scene does not support volume")},getVideoDuration:function(){if("video"==this.getMediaType())return viewer.story.scene.media.displayObject.duration;console.log("current scene is not a video, cannot return duration")},getVideoCurrentTime:function(){if("video"==this.getMediaType())return viewer.story.scene.media.displayObject.currentTime;console.log("current scene is not a video, cannot return current time")},setLocale:function(e){viewer.i18n.locale=e},setProjection:function(e){"string"==typeof e&&(viewer.view.type=e)},setVideoVolume:function(e,t){if("video"==this.getMediaType()){if(void 0===t)t={target:"scene"};else t.target="scene";this.setVolume(e,t)}else console.log("current scene does not support volume change")},setVolume:function(e,t){if("number"==typeof e)parsedData=e;else{if("string"!=typeof e)return void console.log("invalid volume argument: must be a number or a string");parsedData=parseFloat(e)}if(parsedData>=0&&parsedData<=1)if("object"==typeof t||t){var n={duration:1e3,target:"master",onStart:function(){},onEnd:function(){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var i,o;"master"==n.target?o=viewer.audio:"scene"==n.target?o=viewer.story.scene.media.displayObject:"playlist"==n.target&&(o=viewer.playlists.playlist),i=o.volume;var r;r=parsedData<i?-1:1;var s=Math.abs(parsedData-i)*r/n.duration;n.onStart();if(n.duration>10)var a=setInterval(function(){o.volume=i+10*s,(i=o.volume)<=parsedData+Math.abs(s)&&i>=parsedData+-1*Math.abs(s)&&(clearInterval(a),n.onEnd())},10);else o.volume=parsedData}else viewer.audio.volume=parsedData;else console("volume must be a number between 0 and 1")},goToScene:function(e,t){function n(e){e.target.removeEventListener(e.type,arguments.callee),null!=document.getElementById(o.cssStylesheetId)&&(document.getElementById(o.cssStylesheetId).remove(),o.onTransitionOutEnd())}if("string"==typeof e)if(this.isScene(e))if("object"==typeof t||1==t){if(this.getCurrentSceneUid()!=e){var i=this,o={cssClassName:"transition",cssStylesheetId:"transitionStylesheet",durationIn:"800ms",durationOut:"1500ms",delayBetweenInOut:0,onTransitionInStart:function(){var e=i.getFov()/1.2;i.goToView({fov:e,easing:"linear",durationMS:800})},onTransitionInEnd:function(){var e=1.1*i.getFov();i.goToView({fov:e,durationMS:0})},onTransitionOutStart:function(){var e=i.getFov()/1.1;i.goToView({fov:e,easing:"linear",durationMS:1200})},onTransitionOutEnd:function(){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){o.hasOwnProperty(e)&&(o[e]=t[e])})}var r=viewer.container.dom.parentNode.parentNode,s=r.getAttribute("id"),a=document.createElement("style"),c="#"+s+" {transition: opacity "+o.durationOut+";}#"+s+"."+o.cssClassName+" {opacity: 0;transition: opacity "+o.durationIn+";}";a.innerHTML=c,a.setAttribute("id",o.cssStylesheetId),document.body.appendChild(a),r.addEventListener("transitionend",function(t){t.target.removeEventListener(t.type,arguments.callee),viewer.story.onSceneLoadComplete.addOnce(function(){setTimeout(function(){r.classList.remove(o.cssClassName),o.onTransitionOutStart(),r.addEventListener("transitionend",n)},o.delayBetweenInOut)}),viewer.story.loadScene(e),o.onTransitionInEnd()}),o.onTransitionInStart(),r.classList.add(o.cssClassName)}}else this.getCurrentSceneUid()==e?console.log("target is current scene"):viewer.story.loadScene(e);else console.log("not a valid scene uid");else console.log("not a string")},playVideo:function(){"video"==this.getMediaType()&&viewer.story.scene.media.displayObject.play()},pauseVideo:function(){"video"==this.getMediaType()&&viewer.story.scene.media.displayObject.pause()},stopVideo:function(){"video"==this.getMediaType()&&viewer.story.scene.media.displayObject.stop()},playPlaylist:function(){viewer.playlists.playlist.play()},stopPlaylist:function(){viewer.playlists.playlist.stop()},pausePlaylist:function(){viewer.playlists.playlist.pause()},resumePlaylist:function(){viewer.playlists.playlist.resume()},goToNextScene:function(e){var t=this.getNextSceneUid();!1!==t&&this.goToScene(t,e)},goToPreviousScene:function(e){var t=this.getPreviousSceneUid();!1!==t&&this.goToScene(t,e)},goToFirstScene:function(e){var t=viewer.story.scenes[0].config.uid;0==this.isFirstStoryScene()&&this.goToScene(t,e)},goToLastScene:function(e){for(var t=viewer.story.scenes.length,n=0;n<t;n++)if(n==t-1){var i=viewer.story.scenes[n].uid;this.goToScene(i,e)}},goToView:function(e){if("object"==typeof e){var t={yaw:null,pitch:null,roll:null,fov:viewer.camera.fov,durationMS:2e3,cancelRoll:!1,easing:"easeInOutCubic",onStart:function(){},onEnd:function(){}};Object.getOwnPropertyNames(e).forEach(function(n){t.hasOwnProperty(n)&&(t[n]=e[n])}),void 0!==e.uid&&this.isHotspot3D(e.uid)&&(t.yaw=this.getHotspot3DWorld(e.uid).yaw,t.pitch=this.getHotspot3DWorld(e.uid).pitch),t.onStart(),viewer.camera.animation.onComplete.addOnce(function(){t.onEnd()}),viewer.camera.lookAt(t.yaw,t.pitch,t.roll,t.fov,t.durationMS,t.cancelRoll,t.easing)}},isHotspot3D:function(e){return"Hotspot3D"==this.getHotspotType(e)},isHotspotDOM:function(e){return"HotspotDOM"==this.getHotspotType(e)},isScene:function(e){return void 0!==FORGE.UID.get(e)&&"Scene"==FORGE.UID.get(e).className},isLastStoryScene:function(e){var t;if(t=void 0===e?this.getCurrentSceneUid():e,this.isScene(t)){for(var n=viewer.story.scenes.length,i={},o=0;o<n;o++)i[o]=viewer.story.scenes[o].uid;return i[n-1]==t}},isFirstStoryScene:function(e){var t;if(t=void 0===e?this.getCurrentSceneUid():e,this.isScene(t))return viewer.story.scenes[0].config.uid==t}};